<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clock</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.26/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <style>
    body {
      /* font-family: 'Courier', 'Courier New','Arial black'; */
      font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Consolas', 'Lucida Console', Monaco, monospace;
      font-weight: 700;
    }
    #app {
      transition: background-color .5s ease, color .2s ease;
    }
    .darkmode {
      background-color: #212529;
      color: white;
    }
    .app-inner {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      top: 0;
    }
    .button-muted {
      cursor: pointer;
      position: absolute;
      top: 6px;
      right: 10px;
      transition: opacity .2s ease;
    }
    .button-muted.is-muted {
      opacity: 0.2;
    }
    .button-darkmode {
      cursor: pointer;
      position: absolute;
      bottom: 10px;
      left: 0;
      right: 0;
    }
    .bar {
      background-color: #eee;
      position: absolute;
      height: 4px;
      bottom: 0;
      line-height: 0;
    }
    .hms{
      font-size: 8vw;
      line-height: 1;
    }
    small{
      font-size: 4vw;
      color: #ccc;
      min-width: 14.5vw;
    }
    .bar-inner {
      background-color: #39f;
    }
    .darkmode .bar {
      background-color: #333;

    }
    svg {
      width: 48px;
      height: 48px;
      transform: scale(0.5);
    }
    svg path{
      fill: black;
    }
    .darkmode svg path{
      fill: white;
      transition: fill .2s ease;
    }
  </style>
</head>
<body class="h-100">
  <div id="app" class="text-center h-100" v-bind:class="{'darkmode' : darkmode}">
    <audio id="audio" src="tick1.mp3" class="d-none" controls muted></audio>
    <div class="app-inner d-flex h-100 align-items-center justify-content-center">
      <div class="d-block w-100 text-center">
        <div class="row no-gutters hms">
          <div class="col-2 offset-2">{{hh}}</div>
          <div class="col-1">:</div>
          <div class="col-2">{{mm}}</div>
          <div class="col-1">:</div>
          <div class="col-2">{{ss}}</div>
          <div class="col-2">
            <small>
              .{{Math.floor(ms/100)}}
            </small>          
          </div>
        </div>
      </div>
    </div>
    <div class="button-darkmode text-center" @click="darkmode=!darkmode">
      <template v-if="!darkmode">
        <!-- Dark mode -->
        <svg>
          <path d="M45.1,27.6c-0.5-0.1-0.9,0-1.3,0.3c-1.5,1.2-3.2,2.3-5,2.9c-1.7,0.7-3.7,1-5.7,1c-4.6,0-8.7-1.9-11.7-4.9
          c-3-3-4.9-7.2-4.9-11.7c0-1.9,0.3-3.8,0.9-5.5C18,8,18.9,6.3,20.1,4.9c0.5-0.6,0.4-1.5-0.2-2c-0.4-0.3-0.8-0.4-1.3-0.3
          c-4.8,1.3-9,4.2-12,8C3.7,14.4,2,19.1,2,24.2C2,30.4,4.5,35.9,8.5,40s9.6,6.5,15.8,6.5c5.2,0,10-1.8,13.8-4.8
          c3.9-3,6.7-7.4,7.9-12.4C46.4,28.5,45.9,27.8,45.1,27.6z M36.5,39.4c-3.3,2.6-7.4,4.2-12,4.2c-5.4,0-10.2-2.2-13.7-5.7
          C7.2,34.4,5,29.5,5,24.1c0-4.5,1.5-8.5,4-11.8c1.7-2.3,3.9-4.1,6.5-5.4c-0.3,0.6-0.6,1.2-0.8,1.9c-0.7,2-1.1,4.2-1.1,6.4
          c0,5.4,2.2,10.3,5.7,13.8s8.4,5.7,13.8,5.7c2.4,0,4.6-0.4,6.7-1.2c0.7-0.3,1.5-0.6,2.1-0.9C40.7,35.3,38.8,37.6,36.5,39.4z"/>
        </svg>
      </template>
      <template v-if="darkmode">
        <!-- Dark mode off -->
        <svg>
          <path d="M31.8,16.2c-2-2-4.8-3.3-7.8-3.3s-5.8,1.2-7.8,3.3c-2,2-3.3,4.8-3.3,7.8s1.3,5.8,3.3,7.8c2,2,4.8,3.3,7.8,3.3
            s5.8-1.2,7.8-3.3c2-2,3.3-4.8,3.3-7.8S33.8,18.2,31.8,16.2z M29.7,29.7C28.2,31.2,26.2,32,24,32s-4.2-0.9-5.7-2.3S16,26.2,16,24
            s0.9-4.2,2.3-5.7S21.8,16,24,16s4.2,0.9,5.7,2.3S32,21.8,32,24S31.2,28.2,29.7,29.7z"/>
          <path d="M44.5,22.5H40c-0.8,0-1.5,0.7-1.5,1.5c0,0.8,0.7,1.5,1.5,1.5h4.5c0.8,0,1.5-0.7,1.5-1.5S45.3,22.5,44.5,22.5z"/>
          <path d="M24,38.5c-0.8,0-1.5,0.7-1.5,1.5v4.5c0,0.8,0.7,1.5,1.5,1.5c0.8,0,1.5-0.7,1.5-1.5V40C25.5,39.2,24.8,38.5,24,38.5z"/>
          <path d="M39.5,37.4l-3.2-3.2c-0.5-0.6-1.5-0.6-2.1,0c-0.6,0.6-0.6,1.5,0,2.1l3.2,3.2c0.6,0.6,1.5,0.6,2.1,0
            C40.1,39,40.1,38,39.5,37.4z"/>
          <path d="M24,2c-0.8,0-1.5,0.7-1.5,1.5V8c0,0.8,0.7,1.5,1.5,1.5c0.8,0,1.5-0.7,1.5-1.5V3.5C25.5,2.7,24.8,2,24,2z"/>
          <path d="M39.6,8.5c-0.6-0.6-1.5-0.6-2.1,0l-3.2,3.2c-0.6,0.6-0.6,1.5,0,2.1c0.5,0.6,1.5,0.6,2.1,0l3.2-3.2
            C40.2,10,40.2,9,39.6,8.5z"/>
          <path d="M8,22.5H3.5C2.7,22.5,2,23.2,2,24s0.6,1.5,1.5,1.5H8c0.8,0,1.5-0.7,1.5-1.5S8.8,22.5,8,22.5z"/>
          <path d="M13.7,34.2c-0.5-0.6-1.5-0.6-2.1,0l-3.2,3.2c-0.6,0.6-0.6,1.5,0,2.1c0.6,0.6,1.5,0.6,2.1,0l3.2-3.2
            C14.3,35.8,14.3,34.8,13.7,34.2z"/>
          <path d="M13.7,11.7l-3.2-3.2C9.9,7.9,9,7.9,8.4,8.5C7.8,9,7.8,10,8.4,10.6l3.2,3.2c0.6,0.6,1.5,0.6,2.1,0
            C14.3,13.2,14.3,12.2,13.7,11.7z"/>
        </svg>
      </template>
    </div>
    <div class="button-muted text-center" @click="muted=!muted" :class="{'is-muted' : muted}">
      <svg>
        <path d="M2.4,31.9c-1.3,0-2.4-1.1-2.4-2.4v-12c0-1.3,1.1-2.4,2.4-2.4s2.4,1.1,2.4,2.4v12C4.8,30.9,3.7,31.9,2.4,31.9z"/>
        <path d="M9.4,38C8.1,38,7,36.9,7,35.6V11.4C7,10.1,8.1,9,9.4,9s2.4,1.1,2.4,2.4v24.1C11.9,36.9,10.8,38,9.4,38z"/>
        <path d="M16.5,34.9c-1.3,0-2.4-1.1-2.4-2.4V14.5c0-1.3,1.1-2.4,2.4-2.4s2.4,1.1,2.4,2.4v18.1C18.9,33.9,17.8,34.9,16.5,34.9z"/>
        <path d="M23.5,41c-1.3,0-2.4-1.1-2.4-2.4V8.4c0-1.3,1.1-2.4,2.4-2.4s2.4,1.1,2.4,2.4v30.1C25.9,39.9,24.8,41,23.5,41z"/>
        <path d="M30.5,47c-1.3,0-2.4-1.1-2.4-2.4V2.4c0-1.3,1.1-2.4,2.4-2.4c1.3,0,2.4,1.1,2.4,2.4v42.2C32.9,45.9,31.9,47,30.5,47z"/>
        <path d="M37.6,38c-1.3,0-2.4-1.1-2.4-2.4V11.4c0-1.3,1.1-2.4,2.4-2.4c1.3,0,2.4,1.1,2.4,2.4v24.1C40,36.9,38.9,38,37.6,38z"/>
        <path d="M44.6,28.9c-1.3,0-2.4-1.1-2.4-2.4v-6c0-1.3,1.1-2.4,2.4-2.4s2.4,1.1,2.4,2.4v6C47,27.8,45.9,28.9,44.6,28.9z"/>
      </svg>
    </div>
    <div class="bar w-100 text-left">
      <div class="bar-inner d-inline-block h-100" v-bind:style="'width:'+ ms/10 +'%; opacity:'+ms/1000"></div>
    </div>
  </div>
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        time: new Date(),
        audio: {},
        darkmode: false,
        muted: true,
      },
      computed:{
        hh() {
          return dayjs(this.time).format('hh')
        },
        mm() {
          return dayjs(this.time).format('mm')
        },
        ss() {
          return dayjs(this.time).format('ss')
        },
        sec() {
          return dayjs(this.time).second()
        },
        ms() {
          return dayjs(this.time).millisecond()
        },
      },
      watch: {
        sec() {
          if (this.sec === 0) {
            this.playAudio();
            console.log('new min');
          } else
          if ( this.sec % 10 === 0 ) {
            this.playAudio();
            console.log('10 sec');
          } else {
            this.playAudio();
            console.log('1 sec');
          }
        },
        muted() {
          this.audio.muted = !this.audio.muted;
        },
      },
      mounted() {
        const app = this;
        console.log(this.time);
        window.setInterval(function() {
          app.time = new Date()
        }, 17)
      },
      methods: {
        playAudio() {
          this.audio.currentTime = 0;
          if (!this.muted) {
            this.audio.play();
            console.log('play');
          }
        },
      },
      created() {
        this.audio = document.getElementById('audio');
      },
    })
  </script>
</body>
</html>